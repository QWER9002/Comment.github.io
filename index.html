<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>è®°äº‹æœ¬</title>
<style type="text/css">
*{margin:0; padding:0;}
body,input{font-size:14px; line-height:24px; color:#af00fa; font-family:Microsoft yahei, Song, Arial, Helvetica, Tahoma, Geneva;}
h1{margin-bottom:15px; height:100px; line-height:100px; text-align:center; font-size:24px; color:#ffffff; background:purple;}
#content #post,#comment p{zoom:1;}
#content #post:after,#comment p:after{display:block; height:0; clear:both; visibility:hidden; overflow:hidden; content:'.';}
.transition{-webkit-transition:all 0.5s linear; -moz-transition:all 0.5s linear; -o-transition:all 0.5s linear; -ms-transition:all 0.5s linear; transition:all 0.5s linear;}
#content{margin:0 auto; width:960px; overflow:hidden;}
#content #post{margin-bottom:15px; padding-bottom:15px; border-bottom:1px #3f3f3f dashed;
	   height: 556px;
   }
#content #post textarea{display:block; margin-bottom:10px; padding:5px; width:948px; height:390px; border:1px #4d4c4c solid; border-radius:5px; resize:none; outline:none;}
#content #post textarea:hover{border:1px #696969 solid; background:#ffffff;}
#content #post #postBt,#content #post #clearBt{margin-left:5px; padding:3px; float:right;}
#comment{overflow:hidden;}
#comment p{margin-bottom:10px; padding:10px; border-radius:5px;}
#comment p:nth-child(odd){border:1px solid #e3e197; background:rgb(87, 87, 87);}
#comment p:nth-child(even){border:1px solid #f6f7f27c; background:#ebe9e9;}
/*#comment p span{display:inline; float:left;}*/
#comment p .right{text-align:right;}
#comment p .msg{width:738px;}
#comment p .datetime{width:200px; color:#9400D3; text-align:right;}







</style>
<script type="text/javascript">
 var named;
 function delete1(id)
 {
	 localStorage.removeItem(id);
	 this.Storage.writeData();
 }
 function prom() {

	 var name = prompt("è¯·è¾“å…¥æ‚¨çš„åå­—bro!è¯·æ³¨æ„è¦å‘è¡¨æ°å½“è¨€è®ºï¼", "");//å°†è¾“å…¥çš„å†…å®¹èµ‹ç»™å˜é‡ name ï¼Œ
	 named = name;
	 //è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œpromptæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œå‰é¢æ˜¯æç¤ºçš„è¯ï¼Œåé¢æ˜¯å½“å¯¹è¯æ¡†å‡ºæ¥åï¼Œåœ¨å¯¹è¯æ¡†é‡Œçš„é»˜è®¤å€¼

	 if (named)//å¦‚æœè¿”å›çš„æœ‰å†…å®¹

	 {

		 alert("æ¬¢è¿æ‚¨ï¼š" + name)
		 document.getElementById("shangtian").style.display = "none";
		 document.getElementById("ritian").value = named;

	 }
	 else {
		 document.getElementById("ritian").value = "åŒ¿åè¯„è®ºè€…";
	 }

 }
var Storage =
{
  saveData:function()//ä¿å­˜æ•°æ®
  {

		  var data = document.querySelector("#post textarea");
	  if(data.value != "")
	  {
		  var time = new Date().getTime() + Math.random() * 5;//getTimeæ˜¯Dateå¯¹è±¡ä¸­çš„æ–¹æ³•ï¼Œä½œç”¨æ˜¯è¿”å› 1970å¹´01æœˆ01æ—¥è‡³ä»Šçš„æ¯«ç§’æ•°
		  if (named) {
			  localStorage.setItem(time, data.value + "|" + named + "|" + this.getDateTime());//å°†æ¯«ç§’æ•°å­˜å…¥Keyå€¼ä¸­ï¼Œå¯ä»¥é™ä½Keyå€¼é‡å¤ç‡
		  }
		  else
		  {
			  localStorage.setItem(time, data.value + "|" + "åŒ¿åè€…" + "|" + this.getDateTime());//å°†æ¯«ç§’æ•°å­˜å…¥Keyå€¼ä¸­ï¼Œå¯ä»¥é™ä½Keyå€¼é‡å¤ç‡
		  }

		  data.value = "";
		  this.writeData();
	  }
	  else
	  {
		  alert("è¯·å¡«å†™æ‚¨çš„ç•™è¨€ï¼");
	 }
  },
  writeData:function()//è¾“å‡ºæ•°æ®
  {
	 var dataHtml = "", data = "";
	  for(var i = localStorage.length-1; i >= 0; i--)//æ•ˆç‡æ›´é«˜çš„å¾ªç¯æ–¹æ³•
	  {
		  data = localStorage.getItem(localStorage.key(i)).split("|");

			  //dataHtml += "<p><span class=\"msg\">" + data[0] + "</span><span class=\"datetime\">" + data[1] + "</span><span>" + data[2]+"</span></p>";
		  dataHtml += "<span style=>" + data[1] + "<span style=\"float:right\">" + data[2] + "</span><p><span class=\"msg\">" + data[0] + "<input style=\"float:right;border:none;border-radius:5px;\" id=\"clearBt\" type=\"button\" onclick=\"delete1(" + localStorage.key(i) + ");\" value=\"åˆ é™¤\"/>" + "</span></p>";
	  }
	  document.getElementById("comment").innerHTML = dataHtml;
  },
  clearData:function()//æ¸…ç©ºæ•°æ®
  {
	  if(localStorage.length > 0)
	  {
		  if(window.confirm("ä½ ç¡®å®šè¦æ¸…ç©ºå—ğŸ™"))
		  {
			  localStorage.clear();
			  this.writeData();
		  }
	  }
	  else
	 {
		 alert("æ²¡æœ‰éœ€è¦æ¸…ç©ºçš„æ•°æ®ï¼");
	  }
  },
  getDateTime:function()//è·å–æ—¥æœŸæ—¶é—´ï¼Œä¾‹å¦‚ 2012-03-08 12:58:58
  {
	  var isZero = function(num)//ç§æœ‰æ–¹æ³•ï¼Œè‡ªåŠ¨è¡¥é›¶
	  {
		  if(num < 10)
		 {
			  num = "0" + num;
		  }
		  return num;
	  }
	  
	  var d = new Date();
	  return d.getFullYear() + "-" + isZero(d.getMonth() + 1) + "-" + isZero(d.getDate()) + " " + isZero(d.getHours()) + ":" + isZero(d.getMinutes()) + ":" + isZero(d.getSeconds());
  }            
}

window.onload = function()
{
  Storage.writeData();//å½“æ‰“å¼€é¡µé¢çš„æ—¶å€™ï¼Œå…ˆå°†localStorageä¸­çš„æ•°æ®è¾“å‡ºä¸€è¾¹ï¼Œå¦‚æœæ²¡æœ‰æ•°æ®ï¼Œåˆ™è¾“å‡ºç©º
  document.getElementById("postBt").onclick = function(){Storage.saveData();}//å‘è¡¨è¯„è®ºæŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼Œä½œç”¨æ˜¯å°†localStorageä¸­çš„æ•°æ®è¾“å‡º
  document.getElementById("clearBt").onclick = function(){Storage.clearData();}//æ¸…ç©ºæ‰€æœ‰å·²ä¿å­˜çš„æ•°æ®
}





</script>
</head>

<body>

<h1>ç•™è¨€</h1>

<div id="content">
	<div id="post">
		<div style="background: #e6e6fa; ;height:30px;">
			æ˜µç§°ï¼š<input type="submit" id="shangtian" name="Submit3" style="border:none; background-color:#e6e6fa; color:rgb(198, 7, 240);" value="é»˜è®¤ç”¨æˆ·(ç‚¹å‡»å¯æ”¹åğŸ˜Š)" onClick="prom()" />
			<input type="text" id="ritian" style="border:none; background-color:#e6e6fa; color:rgb(198, 7, 240);"   onclick="prom()"/>
			<!--disabled="disabled"-->
		</div>
		<div>
			<textarea class="transition"></textarea>
		</div>
		<input id="postBt" type="button" style="border:none; background-color:#e6e6fa; color:rgb(198, 7, 240);border-radius:5px; width:80px; height:30px;" value="å‘è¡¨ç•™è¨€"/>
		<input id="clearBt" type="button" style="border:none; background-color:#e6e6fa; color:rgb(198, 7, 240);border-radius:5px; width:80px; height:30px;" value="æ¸…ç©º"/>
	</div>
	<div id="comment"></div>
</div>

  
  
</body>
</html>